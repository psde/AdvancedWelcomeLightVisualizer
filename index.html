<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Welcome Light Visualizer v0.1</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js"></script>
  <script src="templates.js"></script>
  <script src="vehicles.js"></script>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <h2>Advanced Welcome Light Visualizer</h2>

  <div style="margin-bottom: 20px; text-align: center; display: flex; justify-content: center; gap: 20px;">
    <div>
      <label for="templateSelect" style="display: inline-block; margin-right: 10px;">Load Template:</label>
      <select id="templateSelect" onchange="loadSelectedTemplate()">
        <option value="">-- Select a Template --</option>
      </select>
    </div>
    <div>
      <label for="vehicleSelect" style="display: inline-block; margin-right: 10px;">Vehicle Model:</label>
      <select id="vehicleSelect" onchange="buildDynamicFields()">
        <!-- Populated dynamically -->
      </select>
    </div>
  </div>

  <div class="main-section">
    <!-- Group 1: FLM2 left [0x43] -->
    <div class="group-container">
      <h3>FLM2 Left [0x43]</h3>
      <label for="leftStaging1" id="label_leftStaging1">Staging1_Data (max 252 Byte):<span class="byte-counter-info"
          id="counter_leftStaging1"></span></label>
      <div class="input-row">
        <input type="text" id="leftStaging1" placeholder="252 Byte, z.B. 00, 01, ..." />
        <button class="copy-btn" title="Copy to Clipboard" onclick="copyToClipboard('leftStaging1')">⧉</button>
        <button class="paste-btn" title="Paste from Clipboard" onclick="pasteFromClipboard('leftStaging1')">⤶</button>
      </div>
      <label for="leftStaging2" id="label_leftStaging2">Staging2_Data (max 168 Byte):<span class="byte-counter-info"
          id="counter_leftStaging2"></span></label>
      <div class="input-row">
        <input type="text" id="leftStaging2" placeholder="168 Byte, z.B. 00, 01, ..." />
        <button class="copy-btn" title="Copy to Clipboard" onclick="copyToClipboard('leftStaging2')">⧉</button>
        <button class="paste-btn" title="Paste from Clipboard" onclick="pasteFromClipboard('leftStaging2')">⤶</button>
      </div>
    </div>

    <!-- Group 2: FLM2 right [0x44] -->
    <div class="group-container">
      <h3>FLM2 Right [0x44]</h3>
      <label for="rightStaging1" id="label_rightStaging1">Staging1_Data (max 252 Byte):<span class="byte-counter-info"
          id="counter_rightStaging1"></span></label>
      <div class="input-row">
        <input type="text" id="rightStaging1" placeholder="252 Byte, z.B. 00, 01, ..." />
        <button class="copy-btn" title="Copy to Clipboard" onclick="copyToClipboard('rightStaging1')">⧉</button>
        <button class="paste-btn" title="Paste from Clipboard" onclick="pasteFromClipboard('rightStaging1')">⤶</button>
      </div>
      <label for="rightStaging2" id="label_rightStaging2">Staging2_Data (max 168 Byte):<span class="byte-counter-info"
          id="counter_rightStaging2"></span></label>
      <div class="input-row">
        <input type="text" id="rightStaging2" placeholder="168 Byte, z.B. 00, 01, ..." />
        <button class="copy-btn" title="Copy to Clipboard" onclick="copyToClipboard('rightStaging2')">⧉</button>
        <button class="paste-btn" title="Paste from Clipboard" onclick="pasteFromClipboard('rightStaging2')">⤶</button>
      </div>
    </div>
  </div>

  <div style="text-align: center; margin-bottom: 20px;">
    <button onclick="buildDynamicFields()">Parse & Build Dynamic Fields</button>
    <button onclick="clearAllFields()">Clear All</button>
  </div>

  <div class="animation-player" id="animationPlayer">
    <h3>Real-time Animation</h3>
    <div class="controls">
      <button onclick="togglePlay()">Play/Pause</button>
      <button onclick="stopAnimation()">Stop</button>

      <label for="speedSelect" style="margin-left: 10px;">Speed:</label>
      <select id="speedSelect" onchange="changeSpeed(this.value)">
        <option value="0.5">0.5x</option>
        <option value="1" selected>1.0x</option>
        <option value="1.5">1.5x</option>
      </select>

      <span class="time-display" id="timeDisplay">0 ms</span>
      <input type="range" id="seekSlider" min="0" max="10000" value="0" step="10" oninput="seekAnimation(this.value)">
      <span class="time-display" id="totalTimeDisplay">0 ms</span>
    </div>

    <div class="lights-container">
      <div class="light-group">
        <h4 style="color: rgb(0, 0, 255);">L</h4>
        <div class="lights-grid" id="leftLights"></div>
      </div>
      <div class="light-group right-group">
        <h4 style="color: rgb(255, 0, 0);">R</h4>
        <!-- keep flex-direction: row-reverse for right side mirroring -->
        <div class="lights-grid" id="rightLights" style="flex-direction: row-reverse;"></div>
      </div>
    </div>
  </div>

  <div class="dynamic-container" id="dynamicContainer">
    <!-- Dynamic Sequences + Diagrams -->
  </div>

  <script src="js/core.js"></script>
  <script src="js/animation.js"></script>
  <script src="js/chart.js"></script>
  <script src="js/editor.js"></script>
  <script src="js/init.js"></script>
</body>

</html>
